<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="utf-8" />
	<title>Better Reddit</title>

	<link href="resources/font/font.css" rel="stylesheet" />
	<link href="resources/stylesheets/app.css" rel="stylesheet" />
	<link href="resources/stylesheets/list.css" rel="stylesheet" />
	<link href="resources/stylesheets/detail.css" rel="stylesheet" />

	<link href="lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.css" rel="stylesheet" />

	<script src="Namespaces.js"></script>

	<!--<script src="core/core.js"></script>-->
	<script src="lib/jquery-2.0.3.js"></script>
	<script src="lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.js"></script>
	<script src="lib/doT/doT.2011.js"></script>
	<script src="lib/pUrl/pUrl.js"></script>

	<script src="domain/repository/Repository.js"></script>
	<script src="application/ListController.js"></script>
	<script src="application/UserController.js"></script>
	<script src="application/DetailController.js"></script>

	<script src="main.js"></script>
</head>
<body>

	<!-- detail -->
	<div data-role="page" class="page" id="detail">
		
		
		<div data-theme="a" data-role="header"  class="detailHeader" title="Better Reddit">
		
				<a href="list.html" data-role="button" data-icon="arrow-l">Back to List</a>
				<h3>{{? it.user}}Hi {{=it.user}}!{{?}}</h3>				
				
				<div class="loginRegister">
					{{? it.user }}
						<a data-role="button" id="logoutButton" href="detail.html?post={{=it.post.id}}" data-icon="arrow-r" data-iconpos="left" data-rel="dialog" class="logoutButton">
							Logout {{=it.user}}
						</a>
					{{?}}

					{{? !it.user }}
						<a data-role="button" href="list.html#login" data-icon="arrow-r" data-iconpos="left" data-rel="dialog" class="loginButton halfButton left">
							Login
						</a>
						<a id="nav-home" data-role="button" href="list.html#register" data-icon="add" data-iconpos="left" data-rel="dialog" class="registerButton halfButton right">
							Register
						</a>
					{{?}}
				</div>
		</div>

		<div data-role="content" class="content">
			<div data-role="header" data-theme="a" data-role="header">
				<span class="rating">
					
				Post from "{{=it.post.author}}", {{=it.post.createTimeDisplay}}
			</div>
			<div class = "Title">
				<h2>{{=it.post.title}}</h2>
				<a href="{{=it.post.url}}" target="_blank">{{=it.post.url}}</a>
			</div>
			
			<ul id="commentList" data-role="listview" data-divider-theme="b" data-inset="true">

				{{~it.post.comments :comment:index}}
					<li data-theme="c">
						<div class="comment">
							<div class="commentInfo">
								<span class="rating">
									<span class="icon icon-liga">&#xe121;</span>&nbsp;
									{{=comment.rating.value}}
								</span>
								<div class="voteButtons">
									{{? it.user }}									
									<a id="voteCommentUp" 
										data-comment="{{=comment.id}}" 
										data-post="{{=it.post.id}}"
										href="detail.html?post={{=it.post.id}}" 
										data-role="button" 
										data-inline="true" 
										data-mini="true" 
										data-icon="arrow-u"> up</a>
									<a id="voteCommentDown" 
										data-comment="{{=comment.id}}" 
										data-post="{{=it.post.id}}"
										href="detail.html?post={{=it.post.id}}" 
										data-role="button" 
										data-inline="true" 
										data-mini="true" 
										data-icon="arrow-d"> down</a>
									{{?}}								
								</div>
							</div>
							<div class="verticalDivider">&nbsp;</div>	
							<div class="commentContent">
								<span class="Text">{{=comment.text}}</span>
								<span class="info">
									<span class="icon-liga">&#xe137;</span>&nbsp;
									{{=comment.author}} at {{=comment.createTimeDisplay}}
								</span>
							</div>
							
						</div>
					</li>
				{{~}}

			</ul>
		</div>
		<div data-theme="a" data-role="footer" data-position="fixed" >
			{{? it.user }}
			<a id="votePostUp" data-post="{{=it.post.id}}" href="detail.html?post={{=it.post.id}}" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-u"> up</a>
			<a id="votePostDown" data-post="{{=it.post.id}}" href="detail.html?post={{=it.post.id}}" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-d"> down</a>
			<a id="addNewComment" href="#newComment" data-role="button" data-icon="add" data-iconpos="left" data-rel="dialog"
				class="newCommentButton" >new Comment
			</a>		
			{{?}}
		</div>
	</div>


	<!-- new comment -->
	<div data-role="page" id="newComment">
		<div data-theme="a" data-role="header">
			<h3 class="title">
				New Comment
			</h3>
		</div>
		<div data-role="content" >
			<form id="newCommentForm">
				<div data-role="fieldcontain">
					<textarea name="comment" id="newCommentTextfield" value="" placeholder="message"
					 type="text"></textarea>
				</div>
				<input id="newCommentSave" data-theme="a" data-icon="check" data-iconpos="left"
				   value="Comment" type="submit">
			</form>
		</div>
	</div>

</body>
</html>
