<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
	<title>Better Reddit</title>

	<link href="resources/font/font.css" rel="stylesheet" />
	<link href="resources/stylesheets/app.css" rel="stylesheet" />
	<link href="resources/stylesheets/list.css" rel="stylesheet" />
	<link href="resources/stylesheets/detail.css" rel="stylesheet" />

	<link href="lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.css" rel="stylesheet" />

	<script src="Namespaces.js"></script>

	<!--<script src="core/core.js"></script>-->
	<script src="lib/jquery-2.0.3.js"></script>
	<script src="lib/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.js"></script>
    <script src="lib/doT/doT.2011.js"></script>
	<script src="lib/pUrl/pUrl.js"></script>

	<script src="domain/repository/Repository.js"></script>
	<script src="application/ListController.js"></script>
	<script src="application/UserController.js"></script>
	<script src="application/DetailController.js"></script>

	<script src="main.js"></script>
</head>
    <body>
        
    <!-- List -->
	<div data-role="page" class="page" id="list">
		<div data-theme="a" data-role="header" class="listHeader">
			<h3 class="title">
				Better Reddit
			</h3>

			<div class="loginRegister">
				{{? it.user }}
				<a data-role="button" id="logoutButton" href="#list" data-icon="arrow-r" data-iconpos="left" data-rel="dialog" class="logoutButton">
					Logout {{=it.user}}
				</a>
				{{?}}

				{{? !it.user }}
				<a data-role="button" href="#login" data-icon="arrow-r" data-iconpos="left" data-rel="dialog" class="loginButton halfButton left">
					Login
				</a>
				<a id="nav-home" data-role="button" href="#register" data-icon="add" data-iconpos="left" data-rel="dialog" class="registerButton halfButton right">
					Register
				</a>
				{{?}}
			</div>
		</div>
		<div data-role="content">
			<ul id="postList" data-role="listview" data-divider-theme="b" data-inset="true">
				{{~it.posts :post:index}}
				<li data-theme="c">
					<a href="detail.html?post={{=post.id}}" data-transition="slide">
						<div class="post">
							<div class="postInfo">
								<span class="rating">
									<span class="icon icon-liga">&#xe121;</span>&nbsp;
									{{=post.rating.value}}
								</span>
								<span class="numberOfComments">
									<span class="icon icon-liga">&#xe034;</span>&nbsp;
									{{=post.comments.length}}
								</span>
							</div>
							<div class="verticalDivider">&nbsp;</div>
							<div class="postContent">
								<span class="title">{{=post.title}}</span>
								<span class="info">
									<span class="icon-liga">&#xe137;</span>&nbsp;
									{{=post.author}} at {{=post.createTimeDisplay}}
								</span>
							</div>
						</div>
					</a>
				</li>
				{{~}}
			</ul>
		</div>
		<div data-theme="a" data-role="footer" data-position="fixed" class="listFooter">
			{{? it.user }}
			<a data-role="button" href="#newPost" data-icon="add" data-iconpos="left" data-rel="dialog" class="newPostButton">
				new Post
			</a>
			{{?}}
		</div>
	</div>
	
	<!-- Login -->
	<div data-role="page" class="page" id="login">
		<div data-theme="a" data-role="header">
			
			<h3 class="title">
				Login
			</h3>
		</div>
		<div data-role="content">
			<form id="loginForm">
				<div data-role="fieldcontain">
					<input name="username" id="login-input-username" placeholder="username" value=""
					type="text">
				</div>
				<div data-role="fieldcontain">
					<input name="password" id="login-input-password" placeholder="password" value=""
					type="password">
				</div>
				<input id="login-submit" data-theme="a" data-icon="check" data-iconpos="left"
				value="Login" type="submit">
			</form>
		</div>
	</div>

	<!-- register -->
	<div data-role="page" class="page" id="register">
		<div data-theme="a" data-role="header">
			<h3 class="title">
				Register
			</h3>
		</div>
		<div data-role="content">
			<form id="registerForm">
				<div data-role="fieldcontain">
					<input name="username" id="register-input-username" placeholder="username" value=""
						   type="text">
				</div>
				<div data-role="fieldcontain">
					<input name="password" id="register-input-password" placeholder="password" value=""
						   type="password">
				</div>
				<div data-role="fieldcontain">
					<input name="passwordConfirm" id="register-input-passwordConfirm" placeholder="repeat password" value=""
						   type="password">
				</div>
				<input id="register-submit" data-theme="a" data-icon="check" data-iconpos="left"
					   value="Register" type="submit">
			</form>
		</div>
	</div>

	<!-- new post -->
	<div data-role="page" class="page" id="newPost">
		<div data-theme="a" data-role="header">
			<h3 class="title">
				New Post
			</h3>
		</div>
		<div data-role="content">
			<form id="newPostForm">
				<div data-role="fieldcontain">
					<textarea name="text" id="newPost-text" placeholder="message" value=""
						   type="text" ></textarea>
				</div>
				<div data-role="fieldcontain">
					<input name="link" id="newPost-link" placeholder="link" value=""
						   type="url">
				</div>
				<input id="newPostSave" data-theme="a" data-icon="check" data-iconpos="left"
					   value="Post" type="submit">
			</form>
		</div>
	</div>
    </body>
</html>
